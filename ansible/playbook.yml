- hosts: localhost
  tasks:
    - name: utils | Ensure that some utils is installed.
      ansible.builtin.apt:
        name: "{{ item }}"
      become: yes
      loop:
        - git
        - vim
        - jq

    - name: utils | Ensure that mlocate is installed.
      ansible.builtin.apt:
        name: mlocate
      become: yes
      register: apt_mlocate

    - name: utils | Ensure that mlocate database exists.
      ansible.builtin.shell:
        cmd: updatedb
      become: yes
      when: apt_mlocate.changed

    - name: Poetry | Ensure that poetry is installed.
      ansible.builtin.shell:
        cmd: curl -sSL https://install.python-poetry.org | python3 -
        creates: "$HOME/.local/bin/poetry"

    - name: Poetry | Ensure that poetry path is configured.
      ansible.builtin.lineinfile:
        line: 'export PATH="/home/vagrant/.local/bin:$PATH"'
        path: $HOME/.bash_profile
        create: true
        backup: true
